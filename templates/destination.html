<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ district.name if district else d.name }} — Mystic Tribes of Odisha</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet">


    <style>
    
@keyframes floatSmall {
  0% { transform: translateY(0px); }
  50% { transform: translateY(-4px); }
  100% { transform: translateY(0px); }
}
h1.h3 {
  animation: floatSmall 6s ease-in-out infinite;
}

/* tab content cross-fade (works with bootstrap shown.bs.tab event below) */
.tab-pane {
  will-change: opacity, transform;
  transition: opacity 400ms ease, transform 400ms ease;
  opacity: 0;
  transform: translateY(6px);
}
.tab-pane.show.active {
  opacity: 1;
  transform: translateY(0);
}

/* image hover zoom (gallery) */
img.img-fluid {
  transition: transform 350ms ease, box-shadow 350ms ease;
}
img.img-fluid:hover {
  transform: scale(1.03);
  box-shadow: 0 12px 30px rgba(0,0,0,0.18);
}

/* card hover lift (for cards or list items) */
.card-overlay, .sidebar-card {
  transition: transform 260ms ease, box-shadow 260ms ease;
}
.card-overlay:hover {
  transform: translateY(-6px);
  box-shadow: 0 18px 36px rgba(0,0,0,0.18);
}

/* small animated underline for nav links */
.navbar .nav-link {
  position: relative;
  overflow: visible;
}
.navbar .nav-link::after {
  content: "";
  display: block;
  height: 2px;
  width: 0%;
  background: rgba(255,255,255,0.9);
  transition: width 260ms ease;
  position: absolute;
  left: 0;
  bottom: -6px;
}
.navbar .nav-link:hover::after { width: 100%; }

/* subtle fade for list items (for use with AOS) */
.list-animated li {
  opacity: 0;
  transform: translateY(8px);
  transition: opacity 420ms ease, transform 420ms ease;
}
.list-animated li.aos-animate {
  opacity: 1;
  transform: translateY(0);
}

/* make AOS work nicely within the semi-transparent card */
[data-aos] {
  will-change: opacity, transform;
}

      /* background covers entire page and will be visible behind all tab content */
      html, body {
        height: 100%;
      }
      body {
        background-image: url('{{ url_for("static", filename="images/odisha.jpg") }}');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        color: #222;
      }

      /* the card is semi-transparent so the background shows through on all tabs */
      .card-overlay {
        background: rgba(255,255,255,0.72); /* adjust alpha (0.0 - 1.0) for more/less transparency */
        border-radius: 8px;
        padding: 18px;
        box-shadow: 0 6px 18px rgba(0,0,0,0.18);
      }

      /* keep tab panes transparent */
      .tab-content .tab-pane {
        background: transparent;
        padding-top: 8px;
      }

      /* readable text boxes on right column */
      .sidebar-card {
        background: rgba(255,255,255,0.85);
        border-radius: 6px;
        padding: 12px;
      }

      /* gallery images */
      .tab-content img { max-height: 360px; object-fit: cover; width: 100%; border-radius: 6px; }

      /* ensure footer / spacing */
      main.container { padding-top: 24px; padding-bottom: 40px; }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg" style="background: linear-gradient(90deg,#7db0ff,#5b8cff);">
      <div class="container">
        <a class="navbar-brand text-white fw-bold" href="/">Mystic Tribes of Odisha</a>
        <div class="collapse navbar-collapse">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link text-white" href="/">Home</a></li>
            <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('quiz') }}">Quiz</a></li>
            <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('random_dest') }}">Surprise Me</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <main class="container my-4">
      <div class="card card-overlay mb-4" data-aos="fade-up" data-aos-delay="50" data-aos-duration="700">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-start">
            <div>
              <h1 class="h3 mb-1">{{ district.name if district else d.name }}</h1>
              <p class="text-muted mb-0">{{ district.state if district else d.state }} • {{ district.category if district else d.category }} • Best time: {{ district.best_time if district else d.best_time }}</p>
            </div>
            <div class="text-end">
              <div><strong>⭐ {{ district.rating if district else d.rating }}</strong></div>
            </div>
          </div>

          <!-- Tabs -->
          <ul class="nav nav-tabs mt-4" id="districtTab" role="tablist">
            <li class="nav-item" role="presentation"><button class="nav-link active" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview" type="button">Overview</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="festivals-tab" data-bs-toggle="tab" data-bs-target="#festivals" type="button">Festivals & Traditions</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="art-tab" data-bs-toggle="tab" data-bs-target="#art" type="button">Art & Culture</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="tribes-tab" data-bs-toggle="tab" data-bs-target="#tribes" type="button">Tribes & Hidden Jewels</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="gallery-tab" data-bs-toggle="tab" data-bs-target="#gallery" type="button">Gallery</button></li>
          </ul>

          <!-- Tab contents -->
          <div class="tab-content mt-4" id="districtTabContent">

            <!-- Overview -->
            <div class="tab-pane fade show active" id="overview" role="tabpanel" aria-labelledby="overview-tab">
              <p>{{ (district.description if district else d.description) }}</p>
              <p><strong>Fun Fact:</strong> {{ (district.fun_fact if district else d.fun_fact) }}</p>
            </div>

            <!-- Festivals -->
            <div class="tab-pane fade" id="festivals" role="tabpanel" aria-labelledby="festivals-tab">
              <h5>Festivals & Traditions</h5>
              <ul class="list-unstyled">
                {% for f in (district.festivals if district else d.festivals) %}
                  <li class="mb-3">
                    <strong>{{ f.name }}:</strong>
                    <div style="margin-top:6px">{{ f.description }}</div>
                  </li>
                {% endfor %}
              </ul>
            </div>

            <!-- Art & Culture -->
            <div class="tab-pane fade" id="art" role="tabpanel" aria-labelledby="art-tab">
              <h5>Art & Culture</h5>
              <ul class="list-unstyled">
                {% for a in (district.crafts if district else d.crafts) %}
                  <li class="mb-3">
                    <strong>{{ a.name }}:</strong>
                    <div style="margin-top:6px">{{ a.description }}</div>
                  </li>
                {% endfor %}
              </ul>
            </div>

            <!-- Tribes & Hidden Jewels -->
            <div class="tab-pane fade" id="tribes" role="tabpanel" aria-labelledby="tribes-tab">
              <div class="row">
                <div class="col-md-7">
                  <h5>Key Tribes</h5>
                  <ul>
                    {% for t in (district.tribes if district else d.tribes) %}
                      <li><strong>{{ t.name }}:</strong> {{ t.description }}</li>
                    {% endfor %}
                  </ul>

                  <h5 class="mt-4">Attractions & Hidden Jewels</h5>
                  <ul>
                    {% for h in (district.hidden_jewels if district else d.hidden_jewels) %}
                      <li class="mb-2"><strong>{{ h.name }}:</strong> {{ h.description }}</li>
                    {% endfor %}
                  </ul>
                </div>

                <div class="col-md-5">
                  <div class="sidebar-card">
                    <h6 class="mb-2">Quick Info</h6>
                    <p class="mb-1"><strong>Best time:</strong> {{ (district.best_time if district else d.best_time) }}</p>
                    <p class="mb-1"><strong>Rating:</strong> {{ (district.rating if district else d.rating) }}</p>
                    <small class="text-muted">Explore nearby waterfalls, temples, and conservation villages.</small>
                  </div>
                </div>
              </div>
            </div>

            <!-- Gallery -->
            <div class="tab-pane fade" id="gallery" role="tabpanel" aria-labelledby="gallery-tab">
              <h5>Gallery</h5>
              <div class="row">
                {% for g in (district.gallery if district else d.gallery) %}
                  <div class="col-md-6 mb-3">
                    <img src="{{ url_for('static', filename=g) }}" alt="{{ (district.name if district else d.name) }} image" class="img-fluid rounded shadow-sm">
                  </div>
                {% endfor %}
              </div>
              <small class="text-muted">Images may be for demo only</small>
            </div>

          </div>
        </div>
      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Keep the active tab on page refresh via hash -->
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        const hash = location.hash;
        if (hash) {
          const btn = document.querySelector(`#districtTab button[data-bs-target="${hash}"]`);
          if (btn) btn.click();
        }

        const tabButtons = document.querySelectorAll('#districtTab button[data-bs-toggle="tab"]');
        tabButtons.forEach(btn => {
          btn.addEventListener('shown.bs.tab', function (e) {
            const target = e.target.getAttribute('data-bs-target');
            history.replaceState(null, null, target);
          });
        });
      });
    </script>
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
<script>
  AOS.init({ duration:700, easing:'ease-out-cubic', once:true, mirror:false });

  // refresh AOS when switching tabs
  document.addEventListener('shown.bs.tab', function () {
    setTimeout(()=>AOS.refresh(),80);
  });

  // smooth scroll card into view on mobile when tab changes
  document.querySelectorAll('#districtTab button[data-bs-toggle="tab"]').forEach(btn=>{
    btn.addEventListener('shown.bs.tab', ()=>{
      if(window.innerWidth<768) {
        document.querySelector('.card-overlay')?.scrollIntoView({behavior:'smooth', block:'start'});
      }
    });
  });
</script>
  </body>
</html>
